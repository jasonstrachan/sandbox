const base = (points) => points.map(([x, y]) => ({ x, y }));

export const CANONICAL_SILHOUETTES = [
  {
    id: 'box-carton',
    title: 'Box / Carton',
    outline: base([
      [0.08, 0],
      [0.92, 0],
      [1, 0.1],
      [1, 0.9],
      [0.92, 1],
      [0.08, 1],
      [0, 0.9],
      [0, 0.1],
    ]),
    dimensions: { width: 160, height: 110 },
    lattice: { cols: 10, rows: 10 },
    palette: { fill: '#f7d7b5', stroke: '#2f2012' },
  },
  {
    id: 'flat-mailer',
    title: 'Flat Tag / Mailer',
    outline: base([
      [0.05, 0.02],
      [0.95, 0.02],
      [0.98, 0.15],
      [0.98, 0.85],
      [0.95, 0.98],
      [0.05, 0.98],
      [0.02, 0.85],
      [0.02, 0.15],
    ]),
    dimensions: { width: 180, height: 90 },
    lattice: { cols: 8, rows: 6 },
    palette: { fill: '#f2f0ec', stroke: '#1e2330' },
  },
  {
    id: 'bottle-profile',
    title: 'Bottle (PET)',
    outline: base([
      [0.45, 0],
      [0.55, 0],
      [0.63, 0.08],
      [0.68, 0.2],
      [0.72, 0.34],
      [0.78, 0.55],
      [0.78, 0.95],
      [0.22, 0.95],
      [0.22, 0.55],
      [0.28, 0.34],
      [0.32, 0.2],
      [0.37, 0.08],
    ]),
    dimensions: { width: 130, height: 240 },
    lattice: { cols: 10, rows: 12 },
    palette: { fill: '#d9f1ff', stroke: '#274c68' },
  },
  {
    id: 'phone-slab',
    title: 'Phone / Slab Device',
    outline: base([
      [0.08, 0],
      [0.92, 0],
      [1, 0.08],
      [1, 0.92],
      [0.92, 1],
      [0.08, 1],
      [0, 0.92],
      [0, 0.08],
    ]),
    dimensions: { width: 150, height: 220 },
    lattice: { cols: 8, rows: 10 },
    palette: { fill: '#1d1f24', stroke: '#7b859b' },
  },
  {
    id: 'irregular-shard',
    title: 'Irregular Fragment',
    outline: base([
      [0.4, 0],
      [0.85, 0.05],
      [1, 0.28],
      [0.82, 0.65],
      [0.52, 1],
      [0.15, 0.85],
      [0, 0.48],
      [0.18, 0.12],
    ]),
    dimensions: { width: 140, height: 130 },
    lattice: { cols: 6, rows: 6 },
    palette: { fill: '#f7bfbf', stroke: '#441818' },
  },
  {
    id: 'handbag-tote',
    title: 'Handbag / Tote',
    outline: base([
      [0.15, 0.35],
      [0.1, 0.05],
      [0.2, 0],
      [0.3, 0.08],
      [0.35, 0.2],
      [0.65, 0.2],
      [0.7, 0.08],
      [0.8, 0],
      [0.9, 0.05],
      [0.85, 0.35],
      [1, 0.35],
      [0.95, 1],
      [0.05, 1],
    ]),
    dimensions: { width: 200, height: 170 },
    lattice: { cols: 10, rows: 12 },
    palette: { fill: '#f8e3f1', stroke: '#33202c' },
  },
  {
    id: 'bicycle-chunk',
    title: 'Bicycle Silhouette Chunk',
    outline: base([
      [0, 0.55],
      [0.12, 0.2],
      [0.35, 0.12],
      [0.55, 0.25],
      [0.65, 0],
      [0.78, 0.05],
      [0.85, 0.25],
      [1, 0.3],
      [0.9, 0.7],
      [0.7, 0.78],
      [0.58, 0.65],
      [0.45, 0.92],
      [0.22, 0.9],
    ]),
    dimensions: { width: 260, height: 170 },
    lattice: { cols: 12, rows: 14 },
    palette: { fill: '#dde5ff', stroke: '#1f2b4f' },
  },
  {
    id: 'bicycle-frame',
    title: 'Bicycle Frame',
    outline: base([
      [0.05, 0.82],
      [0.08, 0.7],
      [0.14, 0.6],
      [0.24, 0.54],
      [0.32, 0.52],
      [0.4, 0.58],
      [0.43, 0.68],
      [0.43, 0.8],
      [0.37, 0.92],
      [0.24, 0.98],
      [0.14, 0.94],
      [0.08, 0.86],
      [0.16, 0.64],
      [0.24, 0.44],
      [0.34, 0.32],
      [0.48, 0.28],
      [0.62, 0.32],
      [0.74, 0.36],
      [0.8, 0.46],
      [0.81, 0.56],
      [0.86, 0.66],
      [0.94, 0.78],
      [0.98, 0.88],
      [0.94, 0.96],
      [0.84, 1],
      [0.72, 0.98],
      [0.64, 0.9],
      [0.6, 0.8],
      [0.59, 0.68],
      [0.52, 0.72],
      [0.44, 0.9],
      [0.32, 0.94],
      [0.22, 0.94],
      [0.13, 0.88],
    ]),
    builder: 'bicycleFrame',
    tubes: [
      { radius: 0.018, path: [[0.3, 0.5], [0.45, 0.72]] }, // seat tube
      { radius: 0.018, path: [[0.78, 0.36], [0.45, 0.72]] }, // down tube
      { radius: 0.018, path: [[0.45, 0.72], [0.18, 0.84]] }, // chain stay
      { radius: 0.018, path: [[0.3, 0.5], [0.18, 0.84]] }, // seat stay
      { radius: 0.02, path: [[0.3, 0.5], [0.4, 0.56], [0.55, 0.62], [0.72, 0.66], [0.82, 0.62]] }, // step-through tube
      { radius: 0.016, path: [[0.78, 0.36], [0.84, 0.5], [0.9, 0.82]] }, // fork
      { radius: 0.016, path: [[0.3, 0.5], [0.24, 0.44]] }, // seat post support
      { radius: 0.014, path: [[0.84, 0.34], [0.88, 0.32]] }, // handlebar stub
    ],
    dimensions: { width: 280, height: 190 },
    lattice: { cols: 14, rows: 12 },
    palette: { fill: '#ced4e0', stroke: '#131a2b' },
  },
  {
    id: 'skull-icon',
    title: 'Skull Icon',
    outline: base([
      [0.2, 0.05],
      [0.8, 0.05],
      [1, 0.35],
      [1, 0.7],
      [0.75, 1],
      [0.25, 1],
      [0, 0.7],
      [0, 0.35],
    ]),
    dimensions: { width: 190, height: 210 },
    lattice: { cols: 12, rows: 12 },
    palette: { fill: '#f6f6f1', stroke: '#1c1c1c' },
  },
];

export function listSilhouettes() {
  return CANONICAL_SILHOUETTES.map((shape) => ({ ...shape }));
}

export function getSilhouette(id) {
  return CANONICAL_SILHOUETTES.find((shape) => shape.id === id) || null;
}
